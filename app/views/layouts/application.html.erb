<!DOCTYPE html>
<html lang="de">
  <head>
    <%
      default_title = "GoAuftrag - Website & Buchungsformular für lokale Dienstleister"
      default_description = "GoAuftrag ist die All-in-One Buchungssoftware für lokale Dienstleister. Website, Online-Buchung und Rechnungen - alles in einer Lösung. Für Reinigung, Gartenpflege, Handwerker und mehr."
      page_title = content_for(:title) || default_title
      page_description = content_for(:description) || default_description
      page_image = content_for(:image) || (asset_url("og-image.jpg") rescue "https://goauftrag.de/og-image.jpg")
      page_url = request.original_url
    %>

    <title><%= page_title %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="<%= page_description %>">
    <meta name="keywords" content="Buchungssoftware, Terminbuchung, lokale Dienstleister, Reinigungsservice, Gartenpflege, Handwerker, Online-Buchung, Website für Dienstleister">
    <meta name="author" content="GoAuftrag">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="<%= page_url %>">

    <%# Open Graph / Facebook %>
    <meta property="og:type" content="website">
    <meta property="og:url" content="<%= page_url %>">
    <meta property="og:title" content="<%= page_title %>">
    <meta property="og:description" content="<%= page_description %>">
    <meta property="og:image" content="<%= page_image %>">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="de_DE">
    <meta property="og:site_name" content="GoAuftrag">

    <%# Twitter Card %>
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="<%= page_url %>">
    <meta name="twitter:title" content="<%= page_title %>">
    <meta name="twitter:description" content="<%= page_description %>">
    <meta name="twitter:image" content="<%= page_image %>">

    <%# App Meta Tags %>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="GoAuftrag">
    <meta name="application-name" content="GoAuftrag">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#059669">
    <meta name="msapplication-TileColor" content="#059669">

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# JSON-LD Structured Data %>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "GoAuftrag",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web",
        "description": "<%= page_description %>",
        "url": "https://goauftrag.de",
        "offers": {
          "@type": "Offer",
          "price": "29.99",
          "priceCurrency": "EUR",
          "priceValidUntil": "<%= 1.year.from_now.strftime('%Y-%m-%d') %>"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "5",
          "ratingCount": "1"
        }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "GoAuftrag",
        "url": "https://goauftrag.de",
        "logo": "<%= asset_url('logo.png') rescue 'https://goauftrag.de/logo.png' %>",
        "sameAs": []
      }
    </script>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%# Tailwind Plus Elements for interactive components %>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1" type="module"></script>
  </head>

  <body class="bg-white antialiased">
    <% if notice %>
      <div class="fixed top-20 left-1/2 -translate-x-1/2 z-[100] max-w-md rounded-md bg-emerald-50 p-4 shadow-lg ring-1 ring-emerald-200">
        <div class="flex">
          <div class="flex-shrink-0">
            <svg class="h-5 w-5 text-emerald-400" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="ml-3">
            <p class="text-sm font-medium text-emerald-800"><%= notice %></p>
          </div>
        </div>
      </div>
    <% end %>
    <% if alert %>
      <div class="fixed top-20 left-1/2 -translate-x-1/2 z-[100] max-w-md rounded-md bg-red-50 p-4 shadow-lg ring-1 ring-red-200">
        <div class="flex">
          <div class="flex-shrink-0">
            <svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="ml-3">
            <p class="text-sm font-medium text-red-800"><%= alert %></p>
          </div>
        </div>
      </div>
    <% end %>
    <%= yield %>
  </body>
</html>
